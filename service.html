<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personnalisation Broderie Numérique - Linguère Fablab</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="service.css">
    <link rel="stylesheet" href="aaaaa.css">
</head>
<body>
    <div class="top-bar">
        <div class="container d-flex flex-wrap justify-content-center justify-content-md-between">
            <span><a href="localisation.html"><i class="fas fa-map-marker-alt me-2"></i> LOCALISATION</a></span>
            <span><i class="fas fa-truck me-2"></i> Livraison Partout au Sénégal</span>
            <span><i class="far fa-clock me-2"></i> 08:00 - 17:00</span>
            <span><i class="fas fa-phone me-2"></i> (+221) 77 077 18 32</span>
            <span><a href="https://wa.me/+221770771832" target="_blank"><i class="fab fa-whatsapp me-2"></i> WHATSAPP</a></span>
        </div>
    </div>
    
    <!-- Navigation -->
    <nav>
        <div class="container d-flex flex-wrap justify-content-between align-items-center">
            <div class="logo animate__animated animate__fadeInLeft d-flex align-items-center">
                <img src="logos.jpeg" alt="Logo" class="logo-img me-3">
                <span class="nav-brand">LINGUERE FABLAB</span>
            </div>
            
            <div class="search-bar animate__animated animate__zoomIn">
                <input type="text" placeholder="Rechercher produits...">
                <button><i class="fas fa-search"></i></button>
            </div>
            
            <div class="icons d-flex align-items-center">
                <span class="me-3"><i class="far fa-heart"></i></span>
                <span class="me-3"><i class="far fa-user"></i></span>
                <span class="cart-count" data-count="0"><i class="fas fa-shopping-cart"></i> <span class="d-none d-md-inline">0 CFA</span></span>
            </div>
        </div>
    </nav>
    
    <!-- Main Navigation -->
    <div class="nav-bar">
        <div class="container d-flex flex-wrap justify-content-center">
            <a href="#" style="color: rgb(255, 68, 0);"><i class="fas fa-home me-2"></i> ACCUEIL</a>
            <div class="dropdown">
                <a href="#"><i class="fas fa-list me-2"></i> CATALOGUE <i class="fas fa-chevron-down ms-1"></i></a>
                <div class="dropdown-menu">
                    <a href="arduino.html"><i class="fas fa-microchip me-2"></i> Kits Arduino et IOT</a>
                    <a href="machine.html"><i class="fas fa-robot me-2"></i> Machines Numériques</a>
                    <a href="installation.html"><i class="fas fa-tools me-2"></i> Installations Fablab</a>
                    <a href="broderie.html"><i class="fas fa-tshirt me-2"></i> Broderie numérique</a>
                    <a href="CNC.html"><i class="fas fa-cogs me-2"></i> Fraiseuses Numérique</a>
                    <a href="laser.html"><i class="fas fa-cut me-2"></i> Découpe laser</a>
                    <a href="boutique"><i class="fas fa-laptop-code me-2"></i> Logiciels</a>
                    <a href="boutique"><i class="fas fa-plug me-2"></i> Accessoires</a>
                </div>
            </div> 
            <a href="#"><i class="fas fa-certificate me-2"></i> NOUVEAUTÉS</a>
            <a href="apropos.html"><i class="fas fa-info-circle me-2"></i> À PROPOS</a>
            <a href="#con"><i class="fas fa-envelope me-2"></i> CONTACT</a>
        </div>
    </div>
    
    <header class="service-header animate__animated animate__fadeInUp">
        <h2 class="service-title">
            <i class="fas fa-tshirt service-icon"></i>
            Broderie Numérique
        </h2>
        <p class="service-subtitle">Personnalisez vos vêtements et accessoires avec nos motifs uniques ou vos propres designs</p>
    </header>
    <div class="tab-container" data-active-tab="gallery">
        <div class="tab active" data-tab="gallery">
            <i class="fas fa-images"></i> Notre Galerie
        </div>
        <div class="tab" data-tab="upload">
            <i class="fas fa-upload"></i> Importer mon design
        </div>
    </div>

        <!-- Gallery Section -->
        <div class="tab-content active" id="gallery-tab">
            <section class="gallery-section">
                <h3 class="section-title">
                    <i class="fas fa-photo-video"></i> Notre Galerie Exclusive
                </h3>
                <p class="section-description">
                    Découvrez nos créations uniques et personnalisez-les selon vos goûts. 
                    Chaque motif est conçu avec soin par nos artistes pour un rendu exceptionnel.
                </p>
                
                <div class="gallery-grid">
                    <div class="gallery-item" data-img="design1.jpg">
                        <img src="https://images.unsplash.com/photo-1567401893414-76b7b1e5a7a5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" alt="Motif broderie floral">
                    </div>
                    <div class="gallery-item" data-img="design1.jpg">
                        <img src="https://images.unsplash.com/photo-1583744946564-b52d01e2da64?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" alt="Motif broderie géométrique">
                    </div>
                    <div class="gallery-item" data-img="design1.jpg">
                        <img src="https://images.unsplash.com/photo-1518895949257-7621c3c786d7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" alt="Motif broderie animal">
                    </div>
                    <div class="gallery-item" data-img="design1.jpg">
                        <img src="https://images.unsplash.com/photo-1554412933-514a83d2f3c8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" alt="Motif broderie lettrage">
                    </div>
                    <div class="gallery-item" data-img="design1.jpg">
                        <img src="https://images.unsplash.com/photo-1560743641-3914f2aae0b4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" alt="Motif broderie tribal">
                    </div>
                    <div class="gallery-item" data-img="design1.jpg">
                        <img src="https://images.unsplash.com/photo-1567401893414-76b7b1e5a7a5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" alt="Motif broderie floral">
                    </div>
                    <div class="gallery-item" data-img="design1.jpg">
                        <img src="https://images.unsplash.com/photo-1579273166152-d725a4e2b755?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" alt="Motif broderie minimaliste">
                    </div>
                    <div class="gallery-item" data-img="design1.jpg">
                        <img src="https://images.unsplash.com/photo-1567401893414-76b7b1e5a7a5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" alt="Motif broderie floral">
                    </div>
                    <!-- Ajoutez les autres items de la galerie de la même manière -->
                </div>
            </section>
        </div>

        <!-- Upload Section -->
        <div class="tab-content" id="upload-tab">
            <section class="upload-section">
                <h3 class="section-title"><i class="fas fa-cloud-upload-alt"></i> Importer votre propre design</h3>
                <p class="section-description">Téléchargez votre image, logo ou fichier de broderie pour créer une pièce véritablement unique.</p>

                <div class="upload-area" id="drop-area">
                    <div class="upload-icon"><i class="fas fa-cloud-upload-alt"></i></div>
                    <h4>Glissez-déposez votre fichier ici</h4>
                    <p>ou</p>
                    <button class="cta-button"><i class="fas fa-folder-open"></i> Parcourir vos fichiers</button>
                    <input type="file" id="file-input" accept="image/*,.svg,.dst" style="display: none;">
                    <p class="small">Formats acceptés : PNG, JPG, SVG, DST (max. 10MB)</p>
                </div>
            </section>
        </div>

        <section class="preview-section animate__animated animate__fadeIn">
            <h3 class="preview-title">
                <i class="fas fa-eye"></i> Aperçu de Votre Broderie
            </h3>
            
            <div class="preview-container">
                <div class="preview-box">
                    <div class="preview-loading"></div>
                    <img src="https://via.placeholder.com/350x350?text=Choisissez+un+motif" 
                         alt="Aperçu de la broderie" 
                         class="preview-image"
                         id="preview-image">
                    <div class="preview-status">Prêt à personnaliser</div>
                </div>
            </div>
            
            <p class="text-center text-muted mt-3">
                Faites défiler pour zoomer ou maintenez pour voir les détails
            </p>
        </section>

        <!-- HTML pour la section de personnalisation -->
        <section class="customization-section">
        <div class="customization-intro animate__animated animate__fadeIn">
            <h3><i class="fas fa-magic"></i> Personnalisation Avancée</h3>
            <p>Créez un design unique avec nos outils de personnalisation</p>
        </div>

        <div class="option-group animate__animated animate__fadeInLeft">
            <label class="option-label"><i class="fas fa-tshirt"></i> Type de support</label>
            <select class="option-select" id="support-type">
                <option value="t-shirt">option</option>
                <option value="t-shirt">T-shirt</option>
                <option value="casquette">Casquette</option>
                <option value="polo">Polo</option>
                <option value="sweat">Sweat à capuche</option>
                <option value="serviette">Serviette</option>
                <option value="sac">Sac</option>
                <option value="autre">Autre (précisez)</option>
            </select>
            <input type="text" class="option-input" id="other-support" placeholder="Précisez le support" style="display: none; margin-top: 0.8rem;">
        </div>

        <div class="option-group animate__animated animate__fadeInRight">
            <label class="option-label"><i class="fas fa-ruler-combined"></i> Dimensions (cm)</label>
            <div style="display: flex; gap: 0.8rem; align-items: center;">
                <input type="number" class="option-input" id="width" placeholder="Largeur" min="1" max="50" value="10">
                <span style="font-weight: 600; color: var(--primary);">×</span>
                <input type="number" class="option-input" id="height" placeholder="Hauteur" min="1" max="50" value="10">
            </div>
        </div>


        <div class="option-group animate__animated animate__fadeInLeft">
            <label class="option-label"><i class="fas fa-palette"></i> Couleurs de broderie</label>
            <div class="color-options">
                <div class="color-option" style="background: #000000;" data-color="#000000" title="Noir"></div>
                <div class="color-option" style="background: #FF0000;" data-color="#FF0000" title="Rouge"></div>
                <div class="color-option" style="background: #0000FF;" data-color="#0000FF" title="Bleu"></div>
                <div class="color-option" style="background: #FFFFFF; border: 1px solid #ddd;" data-color="#FFFFFF" title="Blanc"></div>
                <div class="color-option" style="background: #FFC0CB;" data-color="#FFC0CB" title="Rose"></div>
                <div class="color-option" style="background: #5E35B1;" data-color="#5E35B1" title="Violet"></div>
                <div class="color-option" style="background: #32CD32;" data-color="#32CD32" title="Vert"></div>
                <div class="color-option" style="background: #FFA500;" data-color="#FFA500" title="Orange"></div>
                <div class="color-option" style="background: #FFD700;" data-color="#FFD700" title="Or"></div>
                <div class="color-option" style="background: #C0C0C0;" data-color="#C0C0C0" title="Argent"></div>
            </div>
            <input type="hidden" id="selected-colors" value="">
            <div class="selected-colors-display" id="selected-colors-display"></div>
        </div>


        <div class="option-group animate__animated animate__fadeInRight">
            <label class="option-label"><i class="fas fa-thread"></i> Type de fil</label>
            <select class="option-select" id="thread-type">
                <option value="standard">Standard (polyester)</option>
                <option value="metallise">Métallisé (+15%)</option>
                <option value="fluo">Fluorescent (+10%)</option>
                <option value="brillant">Brillant (+8%)</option>
                <option value="cotton">Coton bio (+12%)</option>
            </select>
        </div>

        <div class="option-group animate__animated animate__fadeInLeft">
            <label class="option-label"><i class="fas fa-boxes"></i> Quantité</label>
            <div style="display: flex; align-items: center; gap: 1rem;">
                <input type="number" class="option-input" id="quantity" min="1" value="1" style="max-width: 80px;">
                <span style="font-size: 0.9rem; color: var(--text-light);">(Remise à partir de 5 pièces)</span>
            </div>
        </div>

            <div class="option-group animate__animated animate__fadeInRight">
                <label class="option-label"><i class="fas fa-clipboard-list"></i> Instructions spéciales</label>
                <textarea class="option-textarea" id="special-notes" placeholder="Ajoutez des instructions particulières (position, détails, etc.)..."></textarea>
            </div>
            </section>
            <!-- Lightbox Structure -->
            <div class="lightbox" id="lightbox">
            <span class="lightbox-close">&times;</span>
            <div class="lightbox-content">
                <img src="" alt="" class="lightbox-img" id="lightbox-img">
                <div class="lightbox-counter" id="lightbox-counter"></div>
                <!-- Ajoutez ce bouton -->
                <button class="select-btn" id="select-image-btn">
                    <i class="fas fa-check"></i> Sélectionner ce motif
                </button>
                <button class="close-btn" id="close-lightbox-btn">
                    <i class="fas fa-times"></i> Fermer
                </button>
            </div>
            <span class="lightbox-nav lightbox-prev">&#10094;</span>
            <span class="lightbox-nav lightbox-next">&#10095;</span>
            </div>


        <!-- Ajoutez cette section juste avant le bouton de soumission existant -->
        <section class="summary-section">
        <h3 class="section-title"><i class="fas fa-clipboard-check"></i> Aperçu général</h3>
        <div class="summary-container" id="summary-container">
            <!-- Le contenu sera généré dynamiquement par JavaScript -->
        </div>

        <div class="summary-actions">
            <button class="summary-btn" id="request-service-btn">
                <i class="fas fa-paper-plane"></i> Demander un service
            </button>
        </div>
        </section>
   


    
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-md-6 mb-5 mb-md-0">
                    <h3 class="footer-heading">LINGUÈRE FABLAB</h3>
                    <p>Votre partenaire en fabrication numérique au Sénégal. Machines, formations et services sur mesure pour particuliers, écoles et entreprises.</p>
                    <div class="social-icons mt-4">
                        <a href="#" class="me-2"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="me-2"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="me-2"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="me-2"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                
                <div class="col-lg-2 col-md-3 col-6 mb-5 mb-md-0">
                    <h3 class="footer-heading">LIENS RAPIDES</h3>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-chevron-right me-2"></i>Accueil</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right me-2"></i>Boutique</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right me-2"></i>Services</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right me-2"></i>Formations</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right me-2"></i>À propos</a></li>
                    </ul>
                </div>
                
                <div class="col-lg-2 col-md-3 col-6 mb-5 mb-md-0">
                    <h3 class="footer-heading">CATÉGORIES</h3>
                    <ul class="footer-links">
                        <li><a href="arduino.html"><i class="fas fa-chevron-right me-2"></i>Arduino & IoT</a></li>
                        <li><a href="machine.html"><i class="fas fa-chevron-right me-2"></i>Machines</a></li>
                        <li><a href="installation.html"><i class="fas fa-chevron-right me-2"></i>Installations</a></li>
                        <li><a href="broderie.html"><i class="fas fa-chevron-right me-2"></i>Broderie</a></li>
                        <li><a href="CNC.html"><i class="fas fa-chevron-right me-2"></i>Fraiseuses Numérique</a></li>
                    </ul>
                </div>
                
                <div class="col-lg-4 col-md-12">
                    <div id="con"></div>
                    <h3 class="footer-heading">CONTACT</h3>
                    <ul class="footer-contact">
                        <li>
                            <i class="fas fa-map-marker-alt"></i>
                            <span>123 Avenue de l'Innovation, Dakar, Sénégal</span>
                        </li>
                        <li>
                            <i class="fas fa-phone"></i>
                            <span>(+221) 77 077 18 32</span>
                        </li>
                        <li>
                            <i class="fas fa-envelope"></i>
                            <span>linguerefablab@gmail.com</span>
                        </li>
                        <li>
                            <i class="fas fa-clock"></i>
                            <span>Lun-Ven: 08:00 - 17:00<br>Sam: 09:00 - 13:00</span>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom pt-4 mt-5">
                <div class="row">
                    <div class="col-md-6 text-center text-md-start">
                        <p class="mb-0">&copy; 2025 Linguère Fablab. Tous droits réservés.</p>
                    </div>
                    <div class="col-md-6 text-center text-md-end">
                        <p class="mb-0">Conçu avec <i class="fas fa-heart text-danger"></i> par Linguère Fablab Team</p>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- Back to Top Button -->
    <div class="back-to-top">
        <i class="fas fa-arrow-up"></i>
    </div>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- AOS (Animate On Scroll) -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- Font Awesome -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    
    <script>
        // Initialize AOS
        AOS.init({
            duration: 800,
            easing: 'ease-in-out',
            once: true
        });
        
        // Back to Top Button
        const backToTopButton = document.querySelector('.back-to-top');
        
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                backToTopButton.classList.add('active');
            } else {
                backToTopButton.classList.remove('active');
            }
        });
        
        backToTopButton.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
        
        // Cart Counter Animation
        const cartCount = document.querySelector('.cart-count');
        let count = 0;
        
        // Simulate adding items to cart (for demo)
        setInterval(() => {
            if (count < 5) {
                count++;
                cartCount.setAttribute('data-count', count);
                
                // Add animation
                cartCount.classList.add('animate__animated', 'animate__bounceIn');
                setTimeout(() => {
                    cartCount.classList.remove('animate__animated', 'animate__bounceIn');
                }, 1000);
            }
        }, 5000);
        
        // Dropdown menu animation
        const dropdowns = document.querySelectorAll('.dropdown');
        
        dropdowns.forEach(dropdown => {
            dropdown.addEventListener('mouseenter', () => {
                const menu = dropdown.querySelector('.dropdown-menu');
                menu.style.display = 'block';
                menu.classList.add('animate__animated', 'animate__fadeIn');
            });
            
            dropdown.addEventListener('mouseleave', () => {
                const menu = dropdown.querySelector('.dropdown-menu');
                menu.style.display = 'none';
                menu.classList.remove('animate__animated', 'animate__fadeIn');
            });
        });
        
        // Search bar focus effect
        const searchInput = document.querySelector('.search-bar input');
        
        searchInput.addEventListener('focus', () => {
            searchInput.parentElement.classList.add('animate__animated', 'animate__pulse');
        });
        
        searchInput.addEventListener('blur', () => {
            searchInput.parentElement.classList.remove('animate__animated', 'animate__pulse');
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Système d'onglets
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    tabs.forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    this.classList.add('active');
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(tabId + '-tab').classList.add('active');
                });
            });
        
            // Gestion du support
            const supportSelect = document.getElementById('support-type');
            const otherSupportInput = document.getElementById('other-support');
            supportSelect.addEventListener('change', function() {
                otherSupportInput.style.display = this.value === 'autre' ? 'block' : 'none';
            });
        
            // Sélection de couleur
          // Sélection multiple de couleurs
        const colorOptions = document.querySelectorAll('.color-option');
        const selectedColorsInput = document.getElementById('selected-colors');
        const selectedColorsDisplay = document.getElementById('selected-colors-display');
        let selectedColors = [];
        
        colorOptions.forEach(option => {
            option.addEventListener('click', function() {
                const color = this.getAttribute('data-color');
                
                // Vérifier si la couleur est déjà sélectionnée
                const colorIndex = selectedColors.indexOf(color);
                
                if (colorIndex === -1) {
                    // Ajouter la couleur
                    selectedColors.push(color);
                    this.classList.add('selected');
                } else {
                    // Retirer la couleur
                    selectedColors.splice(colorIndex, 1);
                    this.classList.remove('selected');
                }
                
                // Mettre à jour le champ caché
                selectedColorsInput.value = selectedColors.join(',');
                
                // Mettre à jour l'affichage
                updateSelectedColorsDisplay();
            });
        });
        
        function updateSelectedColorsDisplay() {
            selectedColorsDisplay.innerHTML = '';
            
            selectedColors.forEach(color => {
                const colorElement = document.createElement('div');
                colorElement.className = 'selected-color';
                colorElement.style.background = color;
                colorElement.setAttribute('data-color', color);
                
                // Ajouter un bouton pour supprimer la couleur
                colorElement.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const colorToRemove = this.getAttribute('data-color');
                    selectedColors = selectedColors.filter(c => c !== colorToRemove);
                    selectedColorsInput.value = selectedColors.join(',');
                    
                    // Retirer la classe selected de l'option correspondante
                    document.querySelectorAll('.color-option').forEach(opt => {
                        if (opt.getAttribute('data-color') === colorToRemove) {
                            opt.classList.remove('selected');
                        }
                    });
                    
                    updateSelectedColorsDisplay();
                });
                
                selectedColorsDisplay.appendChild(colorElement);
            });
        }
        
            // Lightbox simplifiée
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');
            const lightboxClose = document.querySelector('.lightbox-close');
            const lightboxPrev = document.querySelector('.lightbox-prev');
            const lightboxNext = document.querySelector('.lightbox-next');
            const lightboxCounter = document.getElementById('lightbox-counter');
            const selectImageBtn = document.getElementById('select-image-btn');
            
            let currentImageIndex = 0;
            const images = Array.from(document.querySelectorAll('.gallery-item')).map(item => item.querySelector('img').src);
            const previewImage = document.getElementById('preview-image');
            const galleryItems = document.querySelectorAll('.gallery-item');
        
            // Lightbox navigation
            function updateLightboxImage() {
                lightboxImg.src = images[currentImageIndex];
                lightboxCounter.textContent = `${currentImageIndex + 1} / ${images.length}`;
            }
        
            // Ouvrir lightbox depuis la galerie
            galleryItems.forEach((item, index) => {
                item.addEventListener('click', () => {
                    currentImageIndex = index;
                    updateLightboxImage();
                    lightbox.classList.add('active');
                    document.body.style.overflow = 'hidden';
                });
            });
        
            // Navigation lightbox
            lightboxPrev.addEventListener('click', (e) => {
                e.stopPropagation();
                currentImageIndex = (currentImageIndex - 1 + images.length) % images.length;
                updateLightboxImage();
            });
        
            lightboxNext.addEventListener('click', (e) => {
                e.stopPropagation();
                currentImageIndex = (currentImageIndex + 1) % images.length;
                updateLightboxImage();
            });
        
            // Fermer lightbox et sélectionner l'image
            lightboxClose.addEventListener('click', () => {
                lightbox.classList.remove('active');
                document.body.style.overflow = '';
            });
        
            // Sélectionner l'image et fermer la lightbox
            selectImageBtn.addEventListener('click', () => {
                previewImage.src = images[currentImageIndex];
                galleryItems.forEach(item => item.classList.remove('selected'));
                galleryItems[currentImageIndex].classList.add('selected');
                lightbox.classList.remove('active');
                document.body.style.overflow = '';
            });

            // Après la déclaration de selectImageBtn
            const closeLightboxBtn = document.getElementById('close-lightbox-btn');

            closeLightboxBtn.addEventListener('click', () => {
                lightbox.classList.remove('active');
                document.body.style.overflow = '';
            });
        
            // Gestion de l'upload
            const dropArea = document.getElementById('drop-area');
            const fileInput = document.getElementById('file-input');
            const ctaButton = dropArea.querySelector('.cta-button');
        
            dropArea.addEventListener('dragover', function(e) {
                e.preventDefault();
                dropArea.classList.add('active');
            });
        
            dropArea.addEventListener('dragleave', function() {
                dropArea.classList.remove('active');
            });
        
            dropArea.addEventListener('drop', function(e) {
                e.preventDefault();
                dropArea.classList.remove('active');
                handleFile(e.dataTransfer.files[0]);
            });
        
            ctaButton.addEventListener('click', function() {
                fileInput.click();
            });
        
            fileInput.addEventListener('change', function() {
                handleFile(this.files[0]);
            });
        
            function handleFile(file) {
                if (file && (file.type.startsWith('image/') || file.name.endsWith('.svg'))) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        previewImage.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                } else if (file && file.name.endsWith('.dst')) {
                    previewImage.src = 'https://via.placeholder.com/320x320/CCCCCC/808080?Text=Fichier+DST';
                    alert('Le fichier DST est un format de broderie, la prévisualisation peut ne pas être exacte.');
                } else if (file) {
                    alert('Format de fichier non supporté. Veuillez utiliser une image (PNG, JPG, SVG) ou un fichier DST.');
                }
            }
        
            // Navigation clavier
            document.addEventListener('keydown', (e) => {
                if (!lightbox.classList.contains('active')) return;
                
                if (e.key === 'Escape') {
                    lightbox.classList.remove('active');
                    document.body.style.overflow = '';
                } else if (e.key === 'ArrowLeft') {
                    currentImageIndex = (currentImageIndex - 1 + images.length) % images.length;
                    updateLightboxImage();
                } else if (e.key === 'ArrowRight') {
                    currentImageIndex = (currentImageIndex + 1) % images.length;
                    updateLightboxImage();
                }
            });
        });
                // Fonction pour mettre à jour l'aperçu général
                function updateSummary() {
                    const summaryContainer = document.getElementById('summary-container');
                    const supportType = document.getElementById('support-type');
                    const otherSupport = document.getElementById('other-support');
                    const width = document.getElementById('width');
                    const height = document.getElementById('height');
                    const selectedColors = document.getElementById('selected-colors');
                    const threadType = document.getElementById('thread-type');
                    const quantity = document.getElementById('quantity');
                    const specialNotes = document.getElementById('special-notes');
                    const previewImage = document.getElementById('preview-image').src;
                    
                    // Déterminer le type de support
                    let supportText = supportType.options[supportType.selectedIndex].text;
                    if (supportType.value === 'autre' && otherSupport.value) {
                        supportText = otherSupport.value;
                    }
                    
                    // Préparer les couleurs sélectionnées
                    let colorsHtml = '';
                    if (selectedColors.value) {
                        colorsHtml = selectedColors.value.split(',').map(color => {
                            return `<span class="color-swatch" style="background: ${color}"></span>${color}`;
                        }).join(', ');
                    }
                    
                    // Créer le HTML de l'aperçu
                    summaryContainer.innerHTML = `
                        <div class="summary-item">
                            <h4><i class="fas fa-tshirt"></i> Support</h4>
                            <p>${supportText}</p>
                        </div>
                        
                        <div class="summary-item">
                            <h4><i class="fas fa-ruler-combined"></i> Dimensions</h4>
                            <p>${width.value} cm × ${height.value} cm</p>
                        </div>
                        
                        <div class="summary-item">
                            <h4><i class="fas fa-palette"></i> Couleurs</h4>
                            <p>${colorsHtml || 'Aucune couleur sélectionnée'}</p>
                        </div>
                        
                        <div class="summary-item">
                            <h4><i class="fas fa-thread"></i> Type de fil</h4>
                            <p>${threadType.options[threadType.selectedIndex].text}</p>
                        </div>
                        
                        <div class="summary-item">
                            <h4><i class="fas fa-boxes"></i> Quantité</h4>
                            <p>${quantity.value} pièce(s)</p>
                        </div>
                        
                        <div class="summary-item">
                            <h4><i class="fas fa-image"></i> Design</h4>
                            <img src="${previewImage}" alt="Aperçu du design" style="max-width: 100%; max-height: 100px; margin-top: 10px; border-radius: 4px;">
                        </div>
                        
                        ${specialNotes.value ? `
                        <div class="summary-item">
                            <h4><i class="fas fa-clipboard-list"></i> Instructions</h4>
                            <p>${specialNotes.value}</p>
                        </div>
                        ` : ''}
                    `;
                }
                
                // Écouteurs d'événements pour mettre à jour l'aperçu
                document.querySelectorAll('#support-type, #width, #height, #thread-type, #quantity, #special-notes').forEach(element => {
                    element.addEventListener('change', updateSummary);
                });
                
                document.getElementById('other-support').addEventListener('input', updateSummary);
                document.getElementById('selected-colors').addEventListener('change', updateSummary);
                
                // Mettre à jour l'aperçu lors de la sélection d'une image
                document.getElementById('select-image-btn').addEventListener('click', updateSummary);
                document.getElementById('file-input').addEventListener('change', function() {
                    setTimeout(updateSummary, 100); // Petit délai pour permettre le chargement de l'image
                });
                
                // Bouton "Demander un service"
                document.getElementById('request-service-btn').addEventListener('click', function() {
                    // Récupérer toutes les données
                    const formData = {
                        supportType: document.getElementById('support-type').value,
                        otherSupport: document.getElementById('other-support').value,
                        dimensions: {
                            width: document.getElementById('width').value,
                            height: document.getElementById('height').value
                        },
                        colors: document.getElementById('selected-colors').value.split(','),
                        threadType: document.getElementById('thread-type').value,
                        quantity: document.getElementById('quantity').value,
                        specialNotes: document.getElementById('special-notes').value,
                        design: document.getElementById('preview-image').src
                    };
                    
                    // Ici vous pouvez ajouter la logique pour envoyer les données
                    // Par exemple avec fetch() pour une requête AJAX
                    
                    // Simulation d'envoi
                    console.log('Demande de service envoyée:', formData);
                    
                    // Afficher une confirmation
                    alert('Votre demande de service a été envoyée avec succès ! Nous vous contacterons sous peu.');
                    
                    // Vous pouvez aussi rediriger ou vider le formulaire ici
                });
                
                // Initialiser l'aperçu au chargement
                document.addEventListener('DOMContentLoaded', updateSummary);
                document.querySelector('.tab-container').setAttribute('data-active-tab', tabId);
                </script>
</body>
</html>